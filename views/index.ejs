<!DOCTYPE html>
<html>
  <head>
    <title>Ynov Tp-images</title>
    <link rel='stylesheet' href='/stylesheets/style.css' />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@0.9.0/css/bulma.css" crossorigin="anonymous">
    <link rel="stylesheet" href="https://pro.fontawesome.com/releases/v5.10.0/css/all.css" integrity="sha384-AYmEC3Yw5cVb3ZcuHtOA93w35dYTsvhLPVnYs9eStHfGJvOvKxVfELGroGkvsg+p" crossorigin="anonymous"/>
  </head>
  <body>
    <div class="container is-fluid">
      <h1 style="font-size: 50px;">Ynov-TP Image</h1>
        <form action="/upload" method="POST" enctype="multipart/form-data">
            <div class="file">
                <label class="file-label">
                  <input class="file-input" type="file" name="file" multiple>
                  <span class="file-cta"><span class="file-icon"><i class="fas fa-upload"></i></span>
                  <span class="file-label">
                    Selectionner une image
                  </span>
                  </span>
                </label>
              </div> <br>

              <input type="submit" value="Uploader" name="up" id="up" class="button is-primary"/>
        </form>
        <hr>
        
        <!-- On verifie qu'il existe des fichiers -->
        <% if(files){ %>
            
            <div class="tile is-ancestor">
                <div class="tile is-4 is-vertical is-parent">
                    <!-- On boucle la liste des images-->
            <% files.forEach(function(file){%>
                
                    <% if(file.isImage){ %>

                                  <div class="tile is-child box">
                                    <img src="image/<%= file.filename %>" alt="" style="height: 200px;width:250px;border:1px solid grey;">
                                    <form action="/files/<%= file._id %>?_method=DELETE" method="post">
                                        <button class="button is-danger">Supprimer</button>
                                    </form>
                                  </div>
                        
                    <%} else{%>
                        <% file.filename %>
                    <% } %>
                
                <% }) %>
            </div>
        </div>
        <% } else{%>
            Aucun fichier Ã  afficher
        <%}%>
      
        </div>
    </div>
  </body>
  <script src="https://code.jquery.com/jquery-3.5.1.js" integrity="sha256-QWo7LDvxbWT2tbbQ97B53yJnYU3WhH/C8ycbRAkjPDc=" crossorigin="anonymous"></script>
</html>
